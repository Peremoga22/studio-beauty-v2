@page "/personal-account"

<h3 style="padding-top: 7%;"></h3>
<section class="text-center pt-32 pb-12 px-4 bg-white">
    <h1 class="text-4xl font-extrabold mb-4" style="color: #f8b7d8;">Особистий кабінет</h1>
    <p class="text-gray-700 text-lg max-w-2xl mx-auto leading-relaxed">
        В особистому кабінеті ви легко можете переглядати свої записи, замовлення, бонуси та нові акції. Усе — щоб ваш догляд був ще приємнішим і зручнішим.
    </p>
</section>


<section class="bg-light py-0">
    <div class="container text-center">       
        <div class="row g-4 justify-content-center">

            <!-- Косметологія -->
            <div class="col-md-4">
                <div class="p-4 border rounded bg-white h-100 shadow-sm">
                    <i class="fa-solid fa-face-smile-beam fa-2x mb-3" style="color: #f8b7d8;"></i>
                    <h5>Косметологія мої записи</h5>
                    <p class="text-muted">Догляд за шкірою: чищення, пілінги, anti-age та інші процедури.</p>
                    <a href="@($"/history-of-cosmetology-services/{UserId}")" class="btn-buy">
                        <i class="fa-solid fa-face-smile-beam fa-1x me-1"></i>Перейти →
                    </a>
                </div>
            </div>
            
            <!-- Масажна терапія -->
            <div class="col-md-4">
                <div class="p-4 border rounded bg-white h-100 shadow-sm">
                    <i class="fa-solid fa-spa fa-2x mb-3" style="color: #f8b7d8;"></i>
                    <h5>Масажна терапія мої записи</h5>
                    <p class="text-muted">Релакс, відновлення тіла та зняття м’язової напруги.</p>
                    <a href="@($"/history-of-massage-services/{UserId}")" class="btn-buy">
                        <i class="fa-solid fa-face-smile-beam fa-1x me-1"></i>Перейти →
                    </a>
                </div>
            </div>

            <!-- Магазин -->
            <div class="col-md-4">
                <div class="p-4 border rounded bg-white h-100 shadow-sm">
                    <i class="fa-solid fa-store fa-2x mb-3" style="color: #f8b7d8;"></i>
                    <h5>Мої покупки</h5>
                    <p class="text-muted">Професійна косметика та товари для догляду.</p>
                    <a href="@($"/history-of-sales-services/{UserId}")" class="btn-buy">
                        <i class="fa-solid fa-face-smile-beam fa-1x me-1"></i>Перейти →
                    </a>
                </div>
            </div>

            <!-- Відгуки -->
            <div class="col-md-4">
                <div class="p-4 border rounded bg-white h-100 shadow-sm">
                    <i class="fa-solid fa-comment-dots fa-2x mb-3" style="color: #f8b7d8;"></i>
                    <h5>Створити відгуки</h5>
                    <p class="text-muted">Поділіться своїми враженнями про наші послуги 💬</p>
                    <a class="btn-buy">
                        <i class="fa-solid fa-comment-dots fa-1x me-1"></i>Перейти →
                    </a>
                </div>
            </div>

            <!-- Подарункові сертифікати -->
            <div class="col-md-4">
                <div class="p-4 border rounded bg-white h-100 shadow-sm">
                    <i class="fa-solid fa-gift fa-2x mb-3" style="color: #f8b7d8;"></i>
                    <h5>Подарункові сертифікати</h5>
                    <p class="text-muted">Подаруйте близьким красу, турботу та емоції.</p>
                    <a class="btn-buy" >
                        <i class="fa-solid fa-gift fa-1x me-1"></i>Перейти →
                    </a>
                </div>
            </div>

        </div>
    </div>
</section>



@using System.Security.Claims

@code {
    [CascadingParameter]
    private Task<AuthenticationState> AuthenticationStateUser { get; set; }

    private bool IsAuthenticated { get; set; } = false;
    private string UserId { get; set; } = string.Empty;

    protected override async Task OnInitializedAsync()
    {
        var authState = await AuthenticationStateUser;
        var user = authState.User;

        IsAuthenticated = user.Identity?.IsAuthenticated ?? false;

        if (IsAuthenticated)
        {
            // Отримуємо email або ім’я — залежно від того, що є
            UserId =
                user.FindFirst(ClaimTypes.NameIdentifier)?.Value ??     // стандартний ID
                user.FindFirst(ClaimTypes.Email)?.Value ??              // email
                user.FindFirst("email")?.Value ??                      // google email
                user.Identity?.Name ??                                 // fallback
                string.Empty;
        }
    }
}

